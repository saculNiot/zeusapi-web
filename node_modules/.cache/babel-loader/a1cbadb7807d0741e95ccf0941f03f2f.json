{"ast":null,"code":"import { FirebaseServices } from \"../../../utils/firebaseServices\";\nimport { LocalStorage } from \"../../../utils/localStorage\";\nimport { RoutePath } from \"../../../utils/routePath\";\nimport { Networking } from \"../../networking\";\nimport { Response } from \"../../response\";\nimport { GetRelationshipResponse, Relationship } from \"../models/relationship_model\";\nexport class RelationshipRepo {\n  constructor() {\n    this.networking = new Networking();\n  }\n\n  async getAllRelationship(value) {\n    let headers = {\n      Authorization: `Bearer ${await LocalStorage.getAccessToken()}`\n    };\n    let response = await this.networking.getData(`get_all_relationship_by_createdby_id`, headers); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      console.log(response.data);\n      let getRelationshipResponse = new GetRelationshipResponse().fromJson(response.data);\n      return new Response(true, response.message, getRelationshipResponse); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (response.isSuccess && response.message === \"Session expired\") {\n      // Go back to default page if session expired\n      await FirebaseServices.signOut();\n      await LocalStorage.resetStorage();\n      alert(\"Session Expired.Please sign in again.\");\n      value === null || value === void 0 ? void 0 : value.history.replace(RoutePath.default);\n      return new Response(false, \"Session expired\", \"\");\n    } else if (!response.isSuccess && response.message === \"Payment Required\") {\n      // Go back to product page if payment not made\n      alert(response.data);\n      value === null || value === void 0 ? void 0 : value.history.replace(RoutePath.product_choices);\n      return new Response(false, response.message, response.data); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n  async getRelationshipById(value) {\n    let headers = {\n      Authorization: `Bearer ${await LocalStorage.getAccessToken()}`\n    };\n    let path = `clientRoleRelId=${value === null || value === void 0 ? void 0 : value.clientRoleRelId}`;\n    let response = await this.networking.getData(`get_relationship_by_id?${path}`, headers); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      console.log(response.data);\n      let getRelationshipResponse = new GetRelationshipResponse().fromJson(response.data);\n      return new Response(true, response.message, getRelationshipResponse); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (response.isSuccess && response.message === \"Session expired\") {\n      // Go back to default page if session expired\n      await FirebaseServices.signOut();\n      await LocalStorage.resetStorage();\n      alert(\"Session Expired.Please sign in again.\");\n      value === null || value === void 0 ? void 0 : value.history.replace(RoutePath.default);\n      return new Response(false, \"Session expired\", \"\");\n    } else if (!response.isSuccess && response.message === \"Payment Required\") {\n      // Go back to product page if payment not made\n      alert(response.data);\n      value === null || value === void 0 ? void 0 : value.history.replace(RoutePath.product_choices);\n      return new Response(false, response.message, response.data); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n  async saveRelationship(props) {\n    // Initialize the save user model\n    const saveRelationship = new Relationship({\n      clientRoleRelId: props.clientRoleRelId,\n      permission: props.permission,\n      client: props.client,\n      role: props.role,\n      createdById: props.createdById\n    }); // Object to Map, then to JSON\n\n    const body = Object.fromEntries(saveRelationship.toJson());\n    let headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${await LocalStorage.getAccessToken()}`\n    };\n    let response = await this.networking.postData(\"save_relationship\", // API choice is depends on the usage\n    body, headers); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      console.log(response.data);\n      return new Response(true, response.message, response.data); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (response.isSuccess && response.message === \"Session expired\") {\n      // Go back to default page if session expired\n      await FirebaseServices.signOut();\n      await LocalStorage.resetStorage();\n      alert(\"Session Expired.Please sign in again.\");\n      props === null || props === void 0 ? void 0 : props.history.replace(RoutePath.default);\n      return new Response(false, \"Session expired\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess && response.message === \"Payment Required\") {\n      // Go back to product page if payment not made\n      alert(response.data);\n      props === null || props === void 0 ? void 0 : props.history.replace(RoutePath.product_choices);\n      return new Response(false, response.message, response.data); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n  async deleteRelationship(props) {\n    // Initialize the save user model\n    const delete_relationship = new Relationship({\n      clientRoleRelId: props.clientRoleRelId\n    }); // Object to Map, then to JSON\n\n    const body = Object.fromEntries(delete_relationship.toJson());\n    let headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${await LocalStorage.getAccessToken()}`\n    };\n    let response = await this.networking.deleteData(\"delete_relationship\", // API choice is depends on the usage\n    body, headers); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      console.log(response.data);\n      return new Response(true, response.message, response.data); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess && response.message === \"Session expired\") {\n      // Go back to default page if session expired\n      await FirebaseServices.signOut();\n      await LocalStorage.resetStorage();\n      alert(\"Session Expired.Please sign in again.\");\n      props === null || props === void 0 ? void 0 : props.history.replace(RoutePath.default);\n      return new Response(false, \"Session expired\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess && response.message === \"Payment Required\") {\n      // Go back to product page if payment not made\n      alert(response.data);\n      props === null || props === void 0 ? void 0 : props.history.replace(RoutePath.product_choices);\n      return new Response(false, response.message, response.data); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/gohshengyang/Documents/GitHub/zeusapi-web/src/services/api/repositories/relationship_repo.tsx"],"names":["FirebaseServices","LocalStorage","RoutePath","Networking","Response","GetRelationshipResponse","Relationship","RelationshipRepo","networking","getAllRelationship","value","headers","Authorization","getAccessToken","response","getData","isSuccess","data","console","log","getRelationshipResponse","fromJson","message","signOut","resetStorage","alert","history","replace","default","product_choices","getRelationshipById","path","clientRoleRelId","saveRelationship","props","permission","client","role","createdById","body","Object","fromEntries","toJson","postData","deleteRelationship","delete_relationship","deleteData"],"mappings":"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","sourcesContent":["import { FirebaseServices } from \"../../../utils/firebaseServices\";\nimport { LocalStorage } from \"../../../utils/localStorage\";\nimport { RoutePath } from \"../../../utils/routePath\";\nimport { Networking } from \"../../networking\";\nimport { Response } from \"../../response\";\nimport {\n\tGetRelationshipResponse,\n\tRelationship,\n} from \"../models/relationship_model\";\n\nexport class RelationshipRepo {\n\tnetworking = new Networking();\n\n\tasync getAllRelationship(value?: { history?: any }): Promise<Response> {\n\t\tlet headers = {\n\t\t\tAuthorization: `Bearer ${await LocalStorage.getAccessToken()}`,\n\t\t};\n\t\tlet response = await this.networking.getData(\n\t\t\t`get_all_relationship_by_createdby_id`,\n\t\t\theaders\n\t\t);\n\t\t// If data is retrieved and the data is not empty, then return\n\t\tif (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.data !== null &&\n\t\t\tresponse.data !== \"\"\n\t\t) {\n\t\t\tconsole.log(response.data);\n\t\t\tlet getRelationshipResponse =\n\t\t\t\tnew GetRelationshipResponse().fromJson(response.data);\n\t\t\treturn new Response(\n\t\t\t\ttrue,\n\t\t\t\tresponse.message,\n\t\t\t\tgetRelationshipResponse\n\t\t\t);\n\n\t\t\t// If data is retrieved and the data is empty, then return\n\t\t} else if (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.message === \"No records found\"\n\t\t) {\n\t\t\treturn new Response(true, \"No records found\", \"\");\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.message === \"Session expired\"\n\t\t) {\n\t\t\t// Go back to default page if session expired\n\t\t\tawait FirebaseServices.signOut();\n\t\t\tawait LocalStorage.resetStorage();\n\t\t\talert(\"Session Expired.Please sign in again.\");\n\t\t\tvalue?.history.replace(RoutePath.default);\n\t\t\treturn new Response(false, \"Session expired\", \"\");\n\t\t} else if (\n\t\t\t!response.isSuccess &&\n\t\t\tresponse.message === \"Payment Required\"\n\t\t) {\n\t\t\t// Go back to product page if payment not made\n\t\t\talert(response.data);\n\t\t\tvalue?.history.replace(RoutePath.product_choices);\n\t\t\treturn new Response(false, response.message, response.data);\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (!response.isSuccess) {\n\t\t\treturn new Response(false, response.message, \"\");\n\t\t} else {\n\t\t\treturn new Response(false, response.message, response.data);\n\t\t}\n\t}\n\n\tasync getRelationshipById(value?: {\n\t\thistory?: any;\n\t\tclientRoleRelId: string;\n\t}): Promise<Response> {\n\t\tlet headers = {\n\t\t\tAuthorization: `Bearer ${await LocalStorage.getAccessToken()}`,\n\t\t};\n\n\t\tlet path = `clientRoleRelId=${value?.clientRoleRelId}`;\n\t\tlet response = await this.networking.getData(\n\t\t\t`get_relationship_by_id?${path}`,\n\t\t\theaders\n\t\t);\n\t\t// If data is retrieved and the data is not empty, then return\n\t\tif (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.data !== null &&\n\t\t\tresponse.data !== \"\"\n\t\t) {\n\t\t\tconsole.log(response.data);\n\t\t\tlet getRelationshipResponse =\n\t\t\t\tnew GetRelationshipResponse().fromJson(response.data);\n\t\t\treturn new Response(\n\t\t\t\ttrue,\n\t\t\t\tresponse.message,\n\t\t\t\tgetRelationshipResponse\n\t\t\t);\n\n\t\t\t// If data is retrieved and the data is empty, then return\n\t\t} else if (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.message === \"No records found\"\n\t\t) {\n\t\t\treturn new Response(true, \"No records found\", \"\");\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.message === \"Session expired\"\n\t\t) {\n\t\t\t// Go back to default page if session expired\n\t\t\tawait FirebaseServices.signOut();\n\t\t\tawait LocalStorage.resetStorage();\n\t\t\talert(\"Session Expired.Please sign in again.\");\n\t\t\tvalue?.history.replace(RoutePath.default);\n\t\t\treturn new Response(false, \"Session expired\", \"\");\n\t\t} else if (\n\t\t\t!response.isSuccess &&\n\t\t\tresponse.message === \"Payment Required\"\n\t\t) {\n\t\t\t// Go back to product page if payment not made\n\t\t\talert(response.data);\n\t\t\tvalue?.history.replace(RoutePath.product_choices);\n\t\t\treturn new Response(false, response.message, response.data);\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (!response.isSuccess) {\n\t\t\treturn new Response(false, response.message, \"\");\n\t\t} else {\n\t\t\treturn new Response(false, response.message, response.data);\n\t\t}\n\t}\n\n\tasync saveRelationship(props: {\n\t\thistory?: any;\n\t\tcreatedById?: string;\n\t\tclientRoleRelId?: string;\n\t\tpermission?: string;\n\t\tclient?: string;\n\t\trole?: string;\n\t}): Promise<Response> {\n\t\t// Initialize the save user model\n\t\tconst saveRelationship = new Relationship({\n\t\t\tclientRoleRelId: props.clientRoleRelId,\n\t\t\tpermission: props.permission,\n\t\t\tclient: props.client,\n\t\t\trole: props.role,\n\t\t\tcreatedById: props.createdById,\n\t\t});\n\n\t\t// Object to Map, then to JSON\n\t\tconst body = Object.fromEntries(saveRelationship.toJson());\n\n\t\tlet headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAuthorization: `Bearer ${await LocalStorage.getAccessToken()}`,\n\t\t};\n\n\t\tlet response = await this.networking.postData(\n\t\t\t\"save_relationship\", // API choice is depends on the usage\n\t\t\tbody,\n\t\t\theaders\n\t\t);\n\n\t\t// If data is retrieved and the data is not empty, then return\n\t\tif (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.data !== null &&\n\t\t\tresponse.data !== \"\"\n\t\t) {\n\t\t\tconsole.log(response.data);\n\t\t\treturn new Response(true, response.message, response.data);\n\n\t\t\t// If data is retrieved and the data is empty, then return\n\t\t} else if (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.message === \"No records found\"\n\t\t) {\n\t\t\treturn new Response(true, \"No records found\", \"\");\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.message === \"Session expired\"\n\t\t) {\n\t\t\t// Go back to default page if session expired\n\t\t\tawait FirebaseServices.signOut();\n\t\t\tawait LocalStorage.resetStorage();\n\t\t\talert(\"Session Expired.Please sign in again.\");\n\t\t\tprops?.history.replace(RoutePath.default);\n\t\t\treturn new Response(false, \"Session expired\", \"\");\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (\n\t\t\t!response.isSuccess &&\n\t\t\tresponse.message === \"Payment Required\"\n\t\t) {\n\t\t\t// Go back to product page if payment not made\n\t\t\talert(response.data);\n\t\t\tprops?.history.replace(RoutePath.product_choices);\n\t\t\treturn new Response(false, response.message, response.data);\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (!response.isSuccess) {\n\t\t\treturn new Response(false, response.message, \"\");\n\t\t} else {\n\t\t\treturn new Response(false, response.message, response.data);\n\t\t}\n\t}\n\n\tasync deleteRelationship(props: {\n\t\thistory: any;\n\t\tclientRoleRelId?: string;\n\t}): Promise<Response> {\n\t\t// Initialize the save user model\n\t\tconst delete_relationship = new Relationship({\n\t\t\tclientRoleRelId: props.clientRoleRelId,\n\t\t});\n\n\t\t// Object to Map, then to JSON\n\t\tconst body = Object.fromEntries(delete_relationship.toJson());\n\n\t\tlet headers = {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t\tAuthorization: `Bearer ${await LocalStorage.getAccessToken()}`,\n\t\t};\n\n\t\tlet response = await this.networking.deleteData(\n\t\t\t\"delete_relationship\", // API choice is depends on the usage\n\t\t\tbody,\n\t\t\theaders\n\t\t);\n\n\t\t// If data is retrieved and the data is not empty, then return\n\t\tif (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.data !== null &&\n\t\t\tresponse.data !== \"\"\n\t\t) {\n\t\t\tconsole.log(response.data);\n\t\t\treturn new Response(true, response.message, response.data);\n\n\t\t\t// If data is retrieved and the data is empty, then return\n\t\t} else if (\n\t\t\tresponse.isSuccess &&\n\t\t\tresponse.message === \"No records found\"\n\t\t) {\n\t\t\treturn new Response(true, \"No records found\", \"\");\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (\n\t\t\t!response.isSuccess &&\n\t\t\tresponse.message === \"Session expired\"\n\t\t) {\n\t\t\t// Go back to default page if session expired\n\t\t\tawait FirebaseServices.signOut();\n\t\t\tawait LocalStorage.resetStorage();\n\t\t\talert(\"Session Expired.Please sign in again.\");\n\t\t\tprops?.history.replace(RoutePath.default);\n\t\t\treturn new Response(false, \"Session expired\", \"\");\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (\n\t\t\t!response.isSuccess &&\n\t\t\tresponse.message === \"Payment Required\"\n\t\t) {\n\t\t\t// Go back to product page if payment not made\n\t\t\talert(response.data);\n\t\t\tprops?.history.replace(RoutePath.product_choices);\n\t\t\treturn new Response(false, response.message, response.data);\n\n\t\t\t// If http method is timeout or being halt, then return\n\t\t} else if (!response.isSuccess) {\n\t\t\treturn new Response(false, response.message, \"\");\n\t\t} else {\n\t\t\treturn new Response(false, response.message, response.data);\n\t\t}\n\t}\n\n\t\n}\n"]},"metadata":{},"sourceType":"module"}