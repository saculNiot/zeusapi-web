{"ast":null,"code":"var _jsxFileName = \"/Users/gohshengyang/Documents/GitHub/zeusapi-web/src/pages/report/report.tsx\",\n    _s = $RefreshSig$();\n\nimport { AntDesignOutlined, AppstoreFilled, PlusSquareFilled, QuestionCircleOutlined, ShareAltOutlined, UserOutlined } from \"@ant-design/icons\";\nimport { Avatar, Breadcrumb, Button, Input, Layout, Menu, Tooltip } from \"antd\";\nimport { Content, Header } from \"antd/lib/layout/layout\";\nimport Title from \"antd/lib/typography/Title\";\nimport { useEffect, useState } from \"react\";\nimport \"./report.less\";\nimport { useParams } from \"react-router-dom\";\nimport { ReportRepo } from \"../../services/api/repositories/report_repo\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport { FileRepo } from \"../../services/api/repositories/file_repo\";\nimport no_content from \"../../assets/illustrations/no-content.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ReportPage = () => {\n  _s();\n\n  let params = useParams();\n  let reportRepo = new ReportRepo(params.id);\n  const [file, setFile] = useState();\n  const [inputs, setInputs] = useState();\n  const [loading, setLoading] = useState(false);\n  const [showDialog, setShowDialog] = useState(false);\n  const [reports, setReports] = useState([]);\n  const [index, setIndex] = useState(0);\n  useEffect(() => {\n    async function init() {\n      setReports(await reportRepo.getReports());\n      setFile(await FileRepo.getFile(params.id));\n    }\n\n    init();\n  }, []);\n\n  function addReportDialog() {\n    async function onOk() {\n      if (inputs && (inputs === null || inputs === void 0 ? void 0 : inputs.title.length) !== 0 && inputs.url.length !== 0) {\n        setLoading(true);\n        let response = await reportRepo.createReport(inputs.title, inputs.url);\n        setReports(await reportRepo.getReports());\n        setLoading(false);\n      }\n\n      setShowDialog(false);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Add New Report\",\n      visible: showDialog,\n      onOk: onOk,\n      confirmLoading: loading,\n      onCancel: () => setShowDialog(false),\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 5,\n        children: \"Title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        required: true,\n        placeholder: \"Enter report title\",\n        value: inputs === null || inputs === void 0 ? void 0 : inputs.title,\n        onChange: x => {\n          var _inputs$url;\n\n          return setInputs({\n            title: x.target.value,\n            url: (_inputs$url = inputs === null || inputs === void 0 ? void 0 : inputs.url) !== null && _inputs$url !== void 0 ? _inputs$url : \"\"\n          });\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Title, {\n        level: 5,\n        style: {\n          marginTop: \"10px\"\n        },\n        children: \"URL\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        required: true,\n        placeholder: \"Enter report embeded url\",\n        value: inputs === null || inputs === void 0 ? void 0 : inputs.url,\n        onChange: x => {\n          var _inputs$title;\n\n          return setInputs({\n            title: (_inputs$title = inputs === null || inputs === void 0 ? void 0 : inputs.title) !== null && _inputs$title !== void 0 ? _inputs$title : \"\",\n            url: x.target.value\n          });\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      id: \"appbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"caramel-analytic-logo\",\n        placeholder: \"Caramel Analytic\",\n        children: /*#__PURE__*/_jsxDEV(Title, {\n          className: \"text\",\n          level: 4,\n          children: \"Caramel Analytic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        id: \"menu\",\n        theme: \"dark\",\n        mode: \"horizontal\",\n        defaultSelectedKeys: [\"0\"],\n        onClick: e => setIndex(parseInt(e.key)),\n        children: reports.map((report, index) => /*#__PURE__*/_jsxDEV(Menu.Item, {\n          children: report.title\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PlusSquareFilled, {\n        className: \"add-icon\",\n        style: {\n          color: \"white\"\n        },\n        onClick: x => {\n          setInputs({\n            title: \"\",\n            url: \"\"\n          });\n          setShowDialog(true);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-align profile-icon\",\n        children: /*#__PURE__*/_jsxDEV(Avatar, {\n          className: \"icon\",\n          size: 30,\n          icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 52\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(QuestionCircleOutlined, {\n        className: \"right-align appbar-icon\",\n        style: {\n          color: \"white\"\n        },\n        placeholder: \"Question\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppstoreFilled, {\n        className: \"right-align appbar-icon\",\n        style: {\n          color: \"white\"\n        },\n        placeholder: \"add report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-align vertical-divider\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"right-align\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          icon: /*#__PURE__*/_jsxDEV(ShareAltOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 40\n          }, this),\n          size: \"large\",\n          children: \"Share\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Avatar.Group, {\n        maxCount: 4,\n        className: \"right-align avatar-group\",\n        maxStyle: {\n          color: \"#f56a00\",\n          backgroundColor: \"#fde3cf\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          src: \"https://joeschmoe.io/api/v1/random\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Avatar, {\n          style: {\n            backgroundColor: \"#f56a00\"\n          },\n          children: \"K\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Ant User\",\n          placement: \"top\",\n          children: /*#__PURE__*/_jsxDEV(Avatar, {\n            style: {\n              backgroundColor: \"#87d068\"\n            },\n            icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Avatar, {\n          style: {\n            backgroundColor: \"#1890ff\"\n          },\n          icon: /*#__PURE__*/_jsxDEV(AntDesignOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(Content, {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: [addReportDialog(), /*#__PURE__*/_jsxDEV(Breadcrumb, {\n            style: {\n              margin: \"16px 0\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n              children: \"List\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Breadcrumb.Item, {\n              children: file === null || file === void 0 ? void 0 : file.filename\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), reports[index] ? /*#__PURE__*/_jsxDEV(\"iframe\", {\n            className: \"embedded-report\",\n            title: \"report\",\n            allowFullScreen: true,\n            width: \"100%\",\n            src: reports[index].url,\n            style: {\n              border: \"0\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"embedded-report\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: no_content,\n              alt: \"No content found!\",\n              width: \"500px\",\n              height: \"400px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ReportPage, \"ma5+PPDIoX7RJMVD+SQ+lDV4T5Y=\", false, function () {\n  return [useParams];\n});\n\n_c = ReportPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ReportPage\");","map":{"version":3,"sources":["/Users/gohshengyang/Documents/GitHub/zeusapi-web/src/pages/report/report.tsx"],"names":["AntDesignOutlined","AppstoreFilled","PlusSquareFilled","QuestionCircleOutlined","ShareAltOutlined","UserOutlined","Avatar","Breadcrumb","Button","Input","Layout","Menu","Tooltip","Content","Header","Title","useEffect","useState","useParams","ReportRepo","Modal","FileRepo","no_content","ReportPage","params","reportRepo","id","file","setFile","inputs","setInputs","loading","setLoading","showDialog","setShowDialog","reports","setReports","index","setIndex","init","getReports","getFile","addReportDialog","onOk","title","length","url","response","createReport","x","target","value","marginTop","e","parseInt","key","map","report","color","backgroundColor","margin","filename","border"],"mappings":"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","sourcesContent":["import {\n  AntDesignOutlined,\n  AppstoreFilled,\n  PlusSquareFilled,\n  QuestionCircleOutlined,\n  ShareAltOutlined,\n  UserOutlined,\n} from \"@ant-design/icons\";\nimport { Avatar, Breadcrumb, Button, Input, Layout, Menu, Tooltip } from \"antd\";\nimport { Content, Header } from \"antd/lib/layout/layout\";\nimport Title from \"antd/lib/typography/Title\";\nimport { FC, useEffect, useState } from \"react\";\nimport \"./report.less\";\nimport { useParams } from \"react-router-dom\";\nimport { ReportRepo } from \"../../services/api/repositories/report_repo\";\nimport { Report } from \"../../services/api/models/report_model\";\nimport Modal from \"antd/lib/modal/Modal\";\nimport { FileRepo } from \"../../services/api/repositories/file_repo\";\nimport { File } from \"../../services/api/models/file_model\";\nimport no_content from \"../../assets/illustrations/no-content.png\";\n\nexport const ReportPage: FC = () => {\n  let params = useParams<{ id: string }>();\n  let reportRepo = new ReportRepo(params.id);\n\n  const [file, setFile] = useState<File | undefined>();\n  const [inputs, setInputs] = useState<{ title: string; url: string }>();\n  const [loading, setLoading] = useState<boolean>(false);\n  const [showDialog, setShowDialog] = useState<boolean>(false);\n  const [reports, setReports] = useState<Array<Report>>([]);\n  const [index, setIndex] = useState<number>(0);\n\n  useEffect(() => {\n    async function init() {\n      setReports(await reportRepo.getReports());\n      setFile(await FileRepo.getFile(params.id));\n    }\n\n    init();\n  }, []);\n\n  function addReportDialog(): JSX.Element {\n    async function onOk() {\n      if (inputs && inputs?.title.length !== 0 && inputs.url.length !== 0) {\n        setLoading(true);\n\n        let response = await reportRepo.createReport(inputs.title, inputs.url);\n\n        setReports(await reportRepo.getReports());\n\n        setLoading(false);\n      }\n\n      setShowDialog(false);\n    }\n\n    return (\n      <Modal\n        title=\"Add New Report\"\n        visible={showDialog}\n        onOk={onOk}\n        confirmLoading={loading}\n        onCancel={() => setShowDialog(false)}\n      >\n        <Title level={5}>Title</Title>\n        <Input\n          required={true}\n          placeholder=\"Enter report title\"\n          value={inputs?.title}\n          onChange={(x) =>\n            setInputs({ title: x.target.value, url: inputs?.url ?? \"\" })\n          }\n        ></Input>\n        <Title level={5} style={{ marginTop: \"10px\" }}>\n          URL\n        </Title>\n        <Input\n          required={true}\n          placeholder=\"Enter report embeded url\"\n          value={inputs?.url}\n          onChange={(x) =>\n            setInputs({ title: inputs?.title ?? \"\", url: x.target.value })\n          }\n        ></Input>\n      </Modal>\n    );\n  }\n\n  return (\n    <Layout>\n      <Header id=\"appbar\">\n        <div id=\"caramel-analytic-logo\" placeholder=\"Caramel Analytic\">\n          <Title className=\"text\" level={4}>\n            Caramel Analytic\n          </Title>\n        </div>\n        <Menu\n          id=\"menu\"\n          theme=\"dark\"\n          mode=\"horizontal\"\n          defaultSelectedKeys={[\"0\"]}\n          onClick={(e) => setIndex(parseInt(e.key))}\n        >\n          {reports.map((report, index) => (\n            <Menu.Item key={index}>{report.title}</Menu.Item>\n          ))}\n        </Menu>\n        <PlusSquareFilled\n          className=\"add-icon\"\n          style={{ color: \"white\" }}\n          onClick={(x) => {\n            setInputs({ title: \"\", url: \"\" });\n\n            setShowDialog(true);\n          }}\n        />\n        <div className=\"right-align profile-icon\">\n          <Avatar className=\"icon\" size={30} icon={<UserOutlined />} />\n        </div>\n        <QuestionCircleOutlined\n          className=\"right-align appbar-icon\"\n          style={{ color: \"white\" }}\n          placeholder=\"Question\"\n        />\n        <AppstoreFilled\n          className=\"right-align appbar-icon\"\n          style={{ color: \"white\" }}\n          placeholder=\"add report\"\n        />\n        <div className=\"right-align vertical-divider\" />\n        <div className=\"right-align\">\n          <Button type=\"primary\" icon={<ShareAltOutlined />} size=\"large\">\n            Share\n          </Button>\n        </div>\n        <Avatar.Group\n          maxCount={4}\n          className=\"right-align avatar-group\"\n          maxStyle={{ color: \"#f56a00\", backgroundColor: \"#fde3cf\" }}\n        >\n          <Avatar src=\"https://joeschmoe.io/api/v1/random\" />\n          <Avatar style={{ backgroundColor: \"#f56a00\" }}>K</Avatar>\n          <Tooltip title=\"Ant User\" placement=\"top\">\n            <Avatar\n              style={{ backgroundColor: \"#87d068\" }}\n              icon={<UserOutlined />}\n            />\n          </Tooltip>\n          <Avatar\n            style={{ backgroundColor: \"#1890ff\" }}\n            icon={<AntDesignOutlined />}\n          />\n        </Avatar.Group>\n      </Header>\n      <Layout>\n        <Content className=\"content\">\n          <div className=\"content\">\n            {addReportDialog()}\n            <Breadcrumb style={{ margin: \"16px 0\" }}>\n              <Breadcrumb.Item>Home</Breadcrumb.Item>\n              <Breadcrumb.Item>List</Breadcrumb.Item>\n              <Breadcrumb.Item>{file?.filename}</Breadcrumb.Item>\n            </Breadcrumb>\n            {reports[index] ? (\n              <iframe\n                className=\"embedded-report\"\n                title=\"report\"\n                allowFullScreen\n                width={\"100%\"}\n                src={reports[index].url}\n                style={{ border: \"0\" }}\n              />\n            ) : (\n              <div className=\"embedded-report\">\n                <img src={no_content} alt=\"No content found!\" width={\"500px\"} height={\"400px\"}/>\n              </div>\n            )}\n          </div>\n        </Content>\n      </Layout>\n    </Layout>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}