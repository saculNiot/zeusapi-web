{"ast":null,"code":"import { LocalStorage } from \"../../../utils/localStorage\";\nimport { Networking } from \"../../networking\";\nimport { Response } from \"../../response\";\nimport { GetPaymentResponse, Payment } from \"../models/payment_model\";\nexport class PaymentRepo {\n  constructor() {\n    this.networking = new Networking();\n  }\n\n  async getCheckoutSessionUrl(props) {\n    const path = `userId=${props === null || props === void 0 ? void 0 : props.userId}&productId=${props === null || props === void 0 ? void 0 : props.productId}`;\n    const headers = {\n      \"Authorization\": await LocalStorage.getAccessToken()\n    };\n    let response = await this.networking.getData(`get_checkout_session_url?${path}`, headers); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      let getPaymentResponse = new GetPaymentResponse().fromJson(response.data);\n      return new Response(true, response.message, getPaymentResponse); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n  async getCustomerPortalSessionUrl(props) {\n    const path = `userId=${props === null || props === void 0 ? void 0 : props.userId}&email=${props === null || props === void 0 ? void 0 : props.email}`;\n    const headers = {\n      \"Authorization\": await LocalStorage.getAccessToken()\n    };\n    let response = await this.networking.getData(`get_customer_payment_portal_url?${path}`, headers); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      let getPaymentResponse = new GetPaymentResponse().fromJson(response.data);\n      return new Response(true, response.message, getPaymentResponse); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n  async savePayment(props) {\n    // Initialize the save user model\n    const savePayment = new Payment(props.userId, props.email, props.paymentMethodId, props.productId, props.amount); // Object to Map, then to JSON\n\n    const body = Object.fromEntries(savePayment.toJson());\n    let headers = {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\": await LocalStorage.getAccessToken()\n    };\n    let response = await this.networking.postData(\"checkout_payment\", body, headers); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      return new Response(true, response.message, response.data); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/gohshengyang/Documents/GitHub/zeusapi-web/src/services/api/repositories/payment_repo.tsx"],"names":["LocalStorage","Networking","Response","GetPaymentResponse","Payment","PaymentRepo","networking","getCheckoutSessionUrl","props","path","userId","productId","headers","getAccessToken","response","getData","isSuccess","data","getPaymentResponse","fromJson","message","getCustomerPortalSessionUrl","email","savePayment","paymentMethodId","amount","body","Object","fromEntries","toJson","postData"],"mappings":"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","sourcesContent":["import { LocalStorage } from \"../../../utils/localStorage\";\nimport { Networking } from \"../../networking\";\nimport { Response } from \"../../response\";\nimport { GetPaymentResponse, Payment } from \"../models/payment_model\";\n\nexport class PaymentRepo {\n    networking = new Networking();\n\n    async getCheckoutSessionUrl(props?: { userId: string, productId?: string }): Promise<Response> {\n        const path = `userId=${props?.userId}&productId=${props?.productId}`;\n        const headers = {\n            \"Authorization\" : await LocalStorage.getAccessToken()\n        }\n        let response = await this.networking.getData(`get_checkout_session_url?${path}`,headers);\n        // If data is retrieved and the data is not empty, then return\n        if (\n            response.isSuccess &&\n            response.data !== null &&\n            response.data !== \"\"\n        ) {\n            let getPaymentResponse = new GetPaymentResponse().fromJson(\n                response.data\n            );\n            return new Response(\n                true,\n                response.message,\n                getPaymentResponse\n            );\n\n            // If data is retrieved and the data is empty, then return\n        } else if (\n            response.isSuccess &&\n            response.message === \"No records found\"\n        ) {\n            return new Response(true, \"No records found\", \"\");\n\n            // If http method is timeout or being halt, then return\n        } else if (!response.isSuccess) {\n            return new Response(false, response.message, \"\");\n        } else {\n            return new Response(false, response.message, response.data);\n        }\n    }\n\n    async getCustomerPortalSessionUrl(props?: { userId: string, email:string }): Promise<Response> {\n        const path = `userId=${props?.userId}&email=${props?.email}`;\n        const headers = {\n            \"Authorization\" : await LocalStorage.getAccessToken()\n        }\n        let response = await this.networking.getData(`get_customer_payment_portal_url?${path}`,headers);\n        // If data is retrieved and the data is not empty, then return\n        if (\n            response.isSuccess &&\n            response.data !== null &&\n            response.data !== \"\"\n        ) {\n            let getPaymentResponse = new GetPaymentResponse().fromJson(\n                response.data\n            );\n            return new Response(\n                true,\n                response.message,\n                getPaymentResponse\n            );\n\n            // If data is retrieved and the data is empty, then return\n        } else if (\n            response.isSuccess &&\n            response.message === \"No records found\"\n        ) {\n            return new Response(true, \"No records found\", \"\");\n\n            // If http method is timeout or being halt, then return\n        } else if (!response.isSuccess) {\n            return new Response(false, response.message, \"\");\n        } else {\n            return new Response(false, response.message, response.data);\n        }\n    }\n\n    async savePayment(props :{\n        userId?: string,\n        email?: string,\n        paymentMethodId?: string,\n        productId?: string,\n        amount?: number\n    }): Promise<Response> {\n        // Initialize the save user model\n        const savePayment = new Payment(\n            props.userId,\n            props.email,\n            props.paymentMethodId,\n            props.productId,\n            props.amount\n        );\n\n        // Object to Map, then to JSON\n        const body = Object.fromEntries(savePayment.toJson());\n\n        let headers = {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\" : await LocalStorage.getAccessToken()\n        };\n\n        let response = await this.networking.postData(\n            \"checkout_payment\",\n            body,\n            headers\n        );\n\n        // If data is retrieved and the data is not empty, then return\n        if (\n            response.isSuccess &&\n            response.data !== null &&\n            response.data !== \"\"\n        ) {\n            return new Response(true, response.message, response.data);\n\n            // If data is retrieved and the data is empty, then return\n        } else if (\n            response.isSuccess &&\n            response.message === \"No records found\"\n        ) {\n            return new Response(true, \"No records found\", \"\");\n\n            // If http method is timeout or being halt, then return\n        } else if (!response.isSuccess) {\n            return new Response(false, response.message, \"\");\n        } else {\n            return new Response(false, response.message, response.data);\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}