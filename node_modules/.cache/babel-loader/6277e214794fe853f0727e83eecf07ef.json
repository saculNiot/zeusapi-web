{"ast":null,"code":"import { Networking } from \"../../networking\";\nimport { Response } from \"../../response\";\nimport { GetPaymentResponse, Payment } from \"../models/payment_model\";\nexport class PaymentRepo {\n  constructor() {\n    this.networking = new Networking();\n  }\n\n  async getCheckoutSessionUrl(props) {\n    const path = `userId=${props === null || props === void 0 ? void 0 : props.userId}&productId=${props === null || props === void 0 ? void 0 : props.productId}`;\n    let response = await this.networking.getData(`get_checkout_session_url?${path}`); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      let getPaymentResponse = new GetPaymentResponse().fromJson(response.data);\n      return new Response(true, response.message, getPaymentResponse); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n  async getCustomerPortalSessionUrl(props) {\n    const path = `userId=${props === null || props === void 0 ? void 0 : props.userId}&email=${props === null || props === void 0 ? void 0 : props.email}`;\n    let response = await this.networking.getData(`get_customer_payment_portal_url?${path}`); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      let getPaymentResponse = new GetPaymentResponse().fromJson(response.data);\n      return new Response(true, response.message, getPaymentResponse); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n  async savePayment(props) {\n    // Initialize the save user model\n    const savePayment = new Payment(props.userId, props.email, props.paymentMethodId, props.productId, props.amount); // Object to Map, then to JSON\n\n    const body = Object.fromEntries(savePayment.toJson());\n    let headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    let response = await this.networking.postData(\"checkout_payment\", body, headers); // If data is retrieved and the data is not empty, then return\n\n    if (response.isSuccess && response.data !== null && response.data !== \"\") {\n      return new Response(true, response.message, response.data); // If data is retrieved and the data is empty, then return\n    } else if (response.isSuccess && response.message === \"No records found\") {\n      return new Response(true, \"No records found\", \"\"); // If http method is timeout or being halt, then return\n    } else if (!response.isSuccess) {\n      return new Response(false, response.message, \"\");\n    } else {\n      return new Response(false, response.message, response.data);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/gohshengyang/Documents/GitHub/codagence-web/src/services/api/repositories/payment_repo.tsx"],"names":["Networking","Response","GetPaymentResponse","Payment","PaymentRepo","networking","getCheckoutSessionUrl","props","path","userId","productId","response","getData","isSuccess","data","getPaymentResponse","fromJson","message","getCustomerPortalSessionUrl","email","savePayment","paymentMethodId","amount","body","Object","fromEntries","toJson","headers","postData"],"mappings":"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","sourcesContent":["import { Networking } from \"../../networking\";\nimport { Response } from \"../../response\";\nimport { GetPaymentResponse, Payment } from \"../models/payment_model\";\n\nexport class PaymentRepo {\n    networking = new Networking();\n\n    async getCheckoutSessionUrl(props?: { userId: string, productId?: string }): Promise<Response> {\n        const path = `userId=${props?.userId}&productId=${props?.productId}`;\n        let response = await this.networking.getData(`get_checkout_session_url?${path}`);\n        // If data is retrieved and the data is not empty, then return\n        if (\n            response.isSuccess &&\n            response.data !== null &&\n            response.data !== \"\"\n        ) {\n            let getPaymentResponse = new GetPaymentResponse().fromJson(\n                response.data\n            );\n            return new Response(\n                true,\n                response.message,\n                getPaymentResponse\n            );\n\n            // If data is retrieved and the data is empty, then return\n        } else if (\n            response.isSuccess &&\n            response.message === \"No records found\"\n        ) {\n            return new Response(true, \"No records found\", \"\");\n\n            // If http method is timeout or being halt, then return\n        } else if (!response.isSuccess) {\n            return new Response(false, response.message, \"\");\n        } else {\n            return new Response(false, response.message, response.data);\n        }\n    }\n\n    async getCustomerPortalSessionUrl(props?: { userId: string, email:string }): Promise<Response> {\n        const path = `userId=${props?.userId}&email=${props?.email}`;\n        let response = await this.networking.getData(`get_customer_payment_portal_url?${path}`);\n        // If data is retrieved and the data is not empty, then return\n        if (\n            response.isSuccess &&\n            response.data !== null &&\n            response.data !== \"\"\n        ) {\n            let getPaymentResponse = new GetPaymentResponse().fromJson(\n                response.data\n            );\n            return new Response(\n                true,\n                response.message,\n                getPaymentResponse\n            );\n\n            // If data is retrieved and the data is empty, then return\n        } else if (\n            response.isSuccess &&\n            response.message === \"No records found\"\n        ) {\n            return new Response(true, \"No records found\", \"\");\n\n            // If http method is timeout or being halt, then return\n        } else if (!response.isSuccess) {\n            return new Response(false, response.message, \"\");\n        } else {\n            return new Response(false, response.message, response.data);\n        }\n    }\n\n    async savePayment(props :{\n        userId?: string,\n        email?: string,\n        paymentMethodId?: string,\n        productId?: string,\n        amount?: number\n    }): Promise<Response> {\n        // Initialize the save user model\n        const savePayment = new Payment(\n            props.userId,\n            props.email,\n            props.paymentMethodId,\n            props.productId,\n            props.amount\n        );\n\n        // Object to Map, then to JSON\n        const body = Object.fromEntries(savePayment.toJson());\n\n        let headers = {\n            \"Content-Type\": \"application/json\",\n        };\n\n        let response = await this.networking.postData(\n            \"checkout_payment\",\n            body,\n            headers\n        );\n\n        // If data is retrieved and the data is not empty, then return\n        if (\n            response.isSuccess &&\n            response.data !== null &&\n            response.data !== \"\"\n        ) {\n            return new Response(true, response.message, response.data);\n\n            // If data is retrieved and the data is empty, then return\n        } else if (\n            response.isSuccess &&\n            response.message === \"No records found\"\n        ) {\n            return new Response(true, \"No records found\", \"\");\n\n            // If http method is timeout or being halt, then return\n        } else if (!response.isSuccess) {\n            return new Response(false, response.message, \"\");\n        } else {\n            return new Response(false, response.message, response.data);\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}