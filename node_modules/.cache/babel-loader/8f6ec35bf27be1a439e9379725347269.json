{"ast":null,"code":"var _jsxFileName = \"/Users/gohshengyang/Documents/GitHub/zeusapi-web/src/pages/url/FillParam.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Layout, Row, Col, Form, Card, Input, Space, Divider, Spin } from \"antd\";\nimport \"./Url.less\";\nimport { BackHeader, FormButton } from \"../../utils/components\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { RoutePath } from \"../../utils/routePath\";\nimport { UrlRepo } from \"../../services/api/repositories/url_repo\";\nimport Text from \"antd/lib/typography/Text\";\nimport Paragraph from \"antd/lib/typography/Paragraph\";\nimport mixpanel from \"mixpanel-browser\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FillParam = () => {\n  _s();\n\n  let history = useHistory();\n  let location = useLocation();\n  let urlRepo = new UrlRepo();\n  const [form] = Form.useForm();\n  const [isLoading, setLoading] = useState(true);\n  const locationState = location.state;\n  const [_url, setUrl] = useState(locationState.url);\n\n  const onFinish = async value => {\n    mixpanel.track(\"Fill_Param_Excecute_Add_Param_Click\");\n    let unextractedUrl = value[\"url\"];\n    var extractFromBracket = /\\((.*?)\\)/gi;\n    let configParamList = unextractedUrl.match(extractFromBracket) !== null && unextractedUrl.match(extractFromBracket) !== undefined ? unextractedUrl.match(extractFromBracket).map(item => {\n      return item.replace(\"(\", \"\").replace(\")\", \"\");\n    }) : [];\n    let configParam = configParamList.length > 0 ? configParamList.map((item, index) => {\n      if (item.includes(\"=\")) {\n        let tempArray = item.split(\"=\");\n        return {\n          [tempArray[0]]: tempArray[1]\n        };\n      } else {\n        return {\n          [`Value~${item}`]: item\n        };\n      }\n    }) : []; // If no param is added, proceed to next page\n\n    if (configParam.length === 0) {\n      history.push({\n        pathname: RoutePath.fill_field,\n        state: {\n          url: locationState.url,\n          userApiId: locationState.userApiId,\n          apiKey: locationState.apiKey\n        }\n      });\n    } else {\n      history.push({\n        pathname: RoutePath.fill_field,\n        state: {\n          url: locationState.url,\n          apiKey: locationState.apiKey,\n          userApiId: locationState.userApiId,\n          configParam: configParam\n        }\n      });\n    }\n  };\n\n  useEffect(() => {\n    async function initState() {\n      let apiResult = await urlRepo.getConfigParamByApiKey({\n        apiKey: locationState.apiKey\n      });\n\n      if (apiResult.isSuccess) {\n        let url = _url;\n        apiResult.data.forEach(item => {\n          var _item$name;\n\n          if ((_item$name = item.name) === null || _item$name === void 0 ? void 0 : _item$name.includes(\"Value\")) {\n            url = url.replace(`${item.defaultValue}`, `(${item.defaultValue})`);\n          } else {\n            url = url.replace(`${item.name}=${item.defaultValue}`, `(${item.name}=${item.defaultValue})`);\n          }\n        });\n        setUrl(url);\n      }\n\n      setLoading(false);\n    }\n\n    initState();\n  }, []);\n  useEffect(() => form.resetFields(), [_url]);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    className: \"layout\",\n    style: {\n      overflow: \"auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar\",\n      style: {\n        backgroundColor: \"#fff\"\n      },\n      children: /*#__PURE__*/_jsxDEV(BackHeader, {\n        title: \"Fill in the Parammeter (Optional)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      className: \"url_content\",\n      style: {\n        backgroundColor: \"white\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"url_row\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          xl: 8,\n          className: \"url_col\",\n          span: 8\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          xl: 8,\n          className: \"url_col\",\n          span: 8,\n          children: [/*#__PURE__*/_jsxDEV(Space, {\n            direction: \"vertical\",\n            children: [/*#__PURE__*/_jsxDEV(Paragraph, {\n              children: \"The parammeter holds the dynamic value which allows the embedded report to retrieve the customary data.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: \"Example:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Paragraph, {\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                type: \"secondary\",\n                children: [\"https://www.yourdomain.com/getdata\", /*#__PURE__*/_jsxDEV(Text, {\n                  strong: true,\n                  children: \"?user_id=default&time=default\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: \"<or>\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Paragraph, {\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                type: \"secondary\",\n                children: [\"https://www.yourdomain.com/getdata/\", /*#__PURE__*/_jsxDEV(Text, {\n                  strong: true,\n                  children: \"uid123456\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Space, {\n            direction: \"vertical\",\n            children: [/*#__PURE__*/_jsxDEV(Paragraph, {\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                children: [\"Use\", /*#__PURE__*/_jsxDEV(Text, {\n                  keyboard: true,\n                  children: \"(\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  keyboard: true,\n                  children: \")\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 10\n                }, this), \"to wrap the parameters which is dynamic.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: \"Example:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Paragraph, {\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                type: \"secondary\",\n                children: [\"https://www.yourdomain.com/getdata\", /*#__PURE__*/_jsxDEV(Text, {\n                  strong: true,\n                  children: [\"?\", /*#__PURE__*/_jsxDEV(Text, {\n                    type: \"danger\",\n                    children: \"(\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 12\n                  }, this), \"user_id=default\", /*#__PURE__*/_jsxDEV(Text, {\n                    type: \"danger\",\n                    children: \")\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 11\n                  }, this), \"&\", /*#__PURE__*/_jsxDEV(Text, {\n                    type: \"danger\",\n                    children: \"(\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 11\n                  }, this), \"time=default\", /*#__PURE__*/_jsxDEV(Text, {\n                    type: \"danger\",\n                    children: \")\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Text, {\n              children: \"<or>\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(Paragraph, {\n              children: /*#__PURE__*/_jsxDEV(Text, {\n                type: \"secondary\",\n                children: [\"https://www.yourdomain.com/getdata/\", /*#__PURE__*/_jsxDEV(Text, {\n                  type: \"danger\",\n                  children: \"(\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  strong: true,\n                  children: \"uid123456\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Text, {\n                  type: \"danger\",\n                  children: \")\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              name: \"fill_url\",\n              className: \"url_form\",\n              initialValues: {\n                url: _url\n              },\n              onFinish: onFinish,\n              form: form,\n              children: [/*#__PURE__*/_jsxDEV(Spin, {\n                spinning: isLoading,\n                children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"url\",\n                  rules: [{\n                    required: true,\n                    message: \"Missing URL\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    placeholder: \"Key\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                children: /*#__PURE__*/_jsxDEV(FormButton, {\n                  title: \"Next\",\n                  isLoading: false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 10\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          xl: 8,\n          className: \"url_col\",\n          span: 8\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 3\n  }, this);\n};\n\n_s(FillParam, \"ZB7RDLRQY5qWw6qogEpxHrE6qLY=\", false, function () {\n  return [useHistory, useLocation, Form.useForm];\n});\n\n_c = FillParam;\n\nvar _c;\n\n$RefreshReg$(_c, \"FillParam\");","map":{"version":3,"sources":["/Users/gohshengyang/Documents/GitHub/zeusapi-web/src/pages/url/FillParam.tsx"],"names":["React","useEffect","useState","Layout","Row","Col","Form","Card","Input","Space","Divider","Spin","BackHeader","FormButton","useHistory","useLocation","RoutePath","UrlRepo","Text","Paragraph","mixpanel","FillParam","history","location","urlRepo","form","useForm","isLoading","setLoading","locationState","state","_url","setUrl","url","onFinish","value","track","unextractedUrl","extractFromBracket","configParamList","match","undefined","map","item","replace","configParam","length","index","includes","tempArray","split","push","pathname","fill_field","userApiId","apiKey","initState","apiResult","getConfigParamByApiKey","isSuccess","data","forEach","name","defaultValue","resetFields","overflow","backgroundColor","required","message"],"mappings":"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","sourcesContent":["import React, { ReactElement, useEffect, useState } from \"react\";\nimport _ from \"lodash\";\nimport {\n\tLayout,\n\tRow,\n\tCol,\n\tForm,\n\tCard,\n\tmessage,\n\tInput,\n\tSpace,\n\tButton,\n\tModal,\n\tDivider,\n\tSpin,\n} from \"antd\";\nimport \"./Url.less\";\nimport { BackHeader, EmailField, FormButton } from \"../../utils/components\";\nimport { FirebaseServices } from \"../../utils/firebaseServices\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { RoutePath } from \"../../utils/routePath\";\nimport { UrlRepo } from \"../../services/api/repositories/url_repo\";\nimport { LocalStorage } from \"../../utils/localStorage\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport Title from \"antd/lib/typography/Title\";\nimport Text from \"antd/lib/typography/Text\";\nimport Paragraph from \"antd/lib/typography/Paragraph\";\nimport { url } from \"inspector\";\nimport {\n\tCopyOutlined,\n\tMinusCircleOutlined,\n\tPlusOutlined,\n} from \"@ant-design/icons\";\nimport { ConfigParam } from \"../../services/api/models/url_model\";\nimport mixpanel from \"mixpanel-browser\";\n\nexport const FillParam: React.FC<any> = () => {\n\tlet history = useHistory();\n\n\tlet location = useLocation();\n\n\tlet urlRepo = new UrlRepo();\n\n\tconst [form] = Form.useForm();\n\n\tconst [isLoading, setLoading] = useState(true);\n\n\tconst locationState: any = location.state;\n\n\tconst [_url, setUrl] = useState(locationState.url);\n\n\tconst onFinish = async (value: any) => {\n\t\tmixpanel.track(\"Fill_Param_Excecute_Add_Param_Click\");\n\t\tlet unextractedUrl = value[\"url\"];\n\t\tvar extractFromBracket = /\\((.*?)\\)/gi;\n\n\t\tlet configParamList =\n\t\t\tunextractedUrl.match(extractFromBracket) !== null &&\n\t\t\tunextractedUrl.match(extractFromBracket) !== undefined\n\t\t\t\t? unextractedUrl\n\t\t\t\t\t\t.match(extractFromBracket)\n\t\t\t\t\t\t.map((item: string) => {\n\t\t\t\t\t\t\treturn item.replace(\"(\", \"\").replace(\")\", \"\");\n\t\t\t\t\t\t})\n\t\t\t\t: [];\n\n\t\tlet configParam =\n\t\t\tconfigParamList.length > 0\n\t\t\t\t? configParamList.map((item: string, index: number) => {\n\t\t\t\t\t\tif (item.includes(\"=\")) {\n\t\t\t\t\t\t\tlet tempArray = item.split(\"=\");\n\t\t\t\t\t\t\treturn { [tempArray[0]]: tempArray[1] };\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn { [`Value~${item}`]: item };\n\t\t\t\t\t\t}\n\t\t\t\t  })\n\t\t\t\t: [];\n\n\t\t// If no param is added, proceed to next page\n\t\tif (configParam.length === 0) {\n\t\t\thistory.push({\n\t\t\t\tpathname: RoutePath.fill_field,\n\t\t\t\tstate: {\n\t\t\t\t\turl: locationState.url,\n\t\t\t\t\tuserApiId: locationState.userApiId,\n\t\t\t\t\tapiKey: locationState.apiKey,\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\thistory.push({\n\t\t\t\tpathname: RoutePath.fill_field,\n\t\t\t\tstate: {\n\t\t\t\t\turl: locationState.url,\n\t\t\t\t\tapiKey: locationState.apiKey,\n\t\t\t\t\tuserApiId: locationState.userApiId,\n\t\t\t\t\tconfigParam: configParam,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tasync function initState() {\n\t\t\tlet apiResult = await urlRepo.getConfigParamByApiKey({\n\t\t\t\tapiKey: locationState.apiKey,\n\t\t\t});\n\n\t\t\tif (apiResult.isSuccess) {\n\t\t\t\tlet url = _url;\n\t\t\t\tapiResult.data.forEach((item: ConfigParam) => {\n\t\t\t\t\tif (item.name?.includes(\"Value\")) {\n\t\t\t\t\t\turl = url.replace(\n\t\t\t\t\t\t\t`${item.defaultValue}`,\n\t\t\t\t\t\t\t`(${item.defaultValue})`\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\turl = url.replace(\n\t\t\t\t\t\t\t`${item.name}=${item.defaultValue}`,\n\t\t\t\t\t\t\t`(${item.name}=${item.defaultValue})`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tsetUrl(url);\n\t\t\t}\n\t\t\tsetLoading(false);\n\t\t}\n\n\t\tinitState();\n\t}, []);\n\n\tuseEffect(() => form.resetFields(), [_url]);\n\n\treturn (\n\t\t<Layout className=\"layout\" style={{ overflow: \"auto\" }}>\n\t\t\t<div className=\"navbar\" style={{ backgroundColor: \"#fff\" }}>\n\t\t\t\t<BackHeader title=\"Fill in the Parammeter (Optional)\" />\n\t\t\t</div>\n\t\t\t<Layout\n\t\t\t\tclassName=\"url_content\"\n\t\t\t\tstyle={{ backgroundColor: \"white\" }}\n\t\t\t>\n\t\t\t\t<Row className=\"url_row\">\n\t\t\t\t\t<Col xs={24} xl={8} className=\"url_col\" span={8} />\n\t\t\t\t\t<Col xs={24} xl={8} className=\"url_col\" span={8}>\n\t\t\t\t\t\t<Space direction=\"vertical\">\n\t\t\t\t\t\t\t<Paragraph>\n\t\t\t\t\t\t\t\tThe parammeter holds the dynamic value which\n\t\t\t\t\t\t\t\tallows the embedded report to retrieve the\n\t\t\t\t\t\t\t\tcustomary data.\n\t\t\t\t\t\t\t</Paragraph>\n\t\t\t\t\t\t\t<Text>Example:</Text>\n\t\t\t\t\t\t\t<Paragraph>\n\t\t\t\t\t\t\t\t<Text type=\"secondary\">\n\t\t\t\t\t\t\t\t\thttps://www.yourdomain.com/getdata\n\t\t\t\t\t\t\t\t\t<Text strong>\n\t\t\t\t\t\t\t\t\t\t?user_id=default&time=default\n\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Paragraph>\n\t\t\t\t\t\t\t<Text>{\"<or>\"}</Text>\n\t\t\t\t\t\t\t<Paragraph>\n\t\t\t\t\t\t\t\t<Text type=\"secondary\">\n\t\t\t\t\t\t\t\t\thttps://www.yourdomain.com/getdata/\n\t\t\t\t\t\t\t\t\t<Text strong>uid123456</Text>\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Paragraph>\n\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t<Divider></Divider>\n\t\t\t\t\t\t<Space direction=\"vertical\">\n\t\t\t\t\t\t\t<Paragraph>\n\t\t\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t\t\tUse\n\t\t\t\t\t\t\t\t\t<Text keyboard>(</Text>\n\t\t\t\t\t\t\t\t\t<Text keyboard>)</Text>\n\t\t\t\t\t\t\t\t\tto wrap the parameters which is dynamic.\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Paragraph>\n\t\t\t\t\t\t\t<Text>Example:</Text>\n\t\t\t\t\t\t\t<Paragraph>\n\t\t\t\t\t\t\t\t<Text type=\"secondary\">\n\t\t\t\t\t\t\t\t\thttps://www.yourdomain.com/getdata\n\t\t\t\t\t\t\t\t\t<Text strong>\n\t\t\t\t\t\t\t\t\t\t?<Text type=\"danger\">(</Text>\n\t\t\t\t\t\t\t\t\t\tuser_id=default\n\t\t\t\t\t\t\t\t\t\t<Text type=\"danger\">)</Text>&\n\t\t\t\t\t\t\t\t\t\t<Text type=\"danger\">(</Text>\n\t\t\t\t\t\t\t\t\t\ttime=default\n\t\t\t\t\t\t\t\t\t\t<Text type=\"danger\">)</Text>\n\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Paragraph>\n\t\t\t\t\t\t\t<Text>{\"<or>\"}</Text>\n\t\t\t\t\t\t\t<Paragraph>\n\t\t\t\t\t\t\t\t<Text type=\"secondary\">\n\t\t\t\t\t\t\t\t\thttps://www.yourdomain.com/getdata/\n\t\t\t\t\t\t\t\t\t<Text type=\"danger\">(</Text>\n\t\t\t\t\t\t\t\t\t<Text strong>uid123456</Text>\n\t\t\t\t\t\t\t\t\t<Text type=\"danger\">)</Text>\n\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t</Paragraph>\n\t\t\t\t\t\t</Space>\n\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t<Form\n\t\t\t\t\t\t\t\tname=\"fill_url\"\n\t\t\t\t\t\t\t\tclassName=\"url_form\"\n\t\t\t\t\t\t\t\tinitialValues={{ url: _url }}\n\t\t\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\t\t\tform={form}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Spin spinning={isLoading}>\n\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\tname={\"url\"}\n\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: \"Missing URL\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Input placeholder=\"Key\" />\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t</Spin>\n\n\t\t\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t\t\t<FormButton\n\t\t\t\t\t\t\t\t\t\ttitle=\"Next\"\n\t\t\t\t\t\t\t\t\t\tisLoading={false}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={24} xl={8} className=\"url_col\" span={8} />\n\t\t\t\t</Row>\n\t\t\t</Layout>\n\t\t</Layout>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}