{"ast":null,"code":"var _jsxFileName = \"/Users/gohshengyang/Documents/GitHub/codagence-web/src/pages/profile/UserProfile.tsx\",\n    _s = $RefreshSig$();\n\nimport { Card, Col, Form, Input, Layout, Radio, Row } from \"antd\";\nimport { ConfigProvider } from \"antd-country-phone-input\";\nimport \"antd-country-phone-input/dist/index.css\";\nimport mixpanel from \"mixpanel-browser\";\nimport React, { useEffect, useState } from \"react\";\nimport { formatPhoneNumberIntl } from \"react-phone-number-input\";\nimport { useHistory } from \"react-router-dom\";\nimport en from \"world_countries_lists/data/en/world.json\";\nimport { User } from \"../../services/api/models/user_model\";\nimport { UserRepo } from \"../../services/api/repositories/user_repo\";\nimport { BackHeader, FormButton, FormPhoneInput } from \"../../utils/components\";\nimport { LocalStorage } from \"../../utils/localStorage\";\nimport { RoutePath } from \"../../utils/routePath\";\nimport \"./UserProfile.less\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formItemLayout = {\n  labelCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 8\n    }\n  },\n  wrapperCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 16\n    }\n  }\n};\nconst tailFormItemLayout = {\n  wrapperCol: {\n    xs: {\n      span: 24,\n      offset: 0\n    },\n    sm: {\n      span: 16,\n      offset: 8\n    }\n  }\n};\nexport const UserProfile = () => {\n  _s();\n\n  var _userData$nickname, _userData$phoneNo, _userData$acctType, _userData$orgName;\n\n  let userRepo = new UserRepo();\n  let history = useHistory(); // Is btn loading flag\n\n  const [isLoading, setLoading] = useState(false); // Is card loading flag\n\n  const [isCardLoading, setCardLoading] = useState(true);\n  const [userData, setUserData] = useState(new User({}));\n\n  const onFinish = async values => {\n    let userId = await LocalStorage.getUserID();\n    setLoading(true);\n    mixpanel.track(\"Profile_Excecute_Update_Profile_Click\");\n    let apiResult = await userRepo.saveUser({\n      purpose: \"update\",\n      userId: userId,\n      nickname: values[\"nickname\"],\n      phoneNo: formatPhoneNumberIntl(values[\"phone_number\"]),\n      acctType: values[\"account_type\"],\n      orgName: values[\"organisation_name\"]\n    });\n\n    if (apiResult.isSuccess) {\n      alert(\"Update Success\");\n      mixpanel.track(\"Profile_Excecute_Update_Profile_Click\", {\n        apiResult: apiResult.message\n      });\n      mixpanel.people.set({\n        Nickname: values[\"nickname\"],\n        PhoneNo: formatPhoneNumberIntl(values[\"phone_number\"]),\n        AcctType: values[\"account_type\"],\n        OrgName: values[\"organisation_name\"]\n      });\n      history.replace(RoutePath.home);\n      setLoading(false);\n    } else {\n      mixpanel.track(\"Profile_Excecute_Update_ProfileClick\", {\n        apiResult: apiResult.message\n      });\n      alert(apiResult.message);\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      let userId = await LocalStorage.getUserID();\n      let apiResult = await userRepo.getUserById({\n        userId: userId\n      });\n\n      if (apiResult.isSuccess) {\n        setUserData(apiResult.data[0]);\n      } else {\n        alert(apiResult.message);\n      }\n\n      setCardLoading(false);\n    }\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    className: \"layout\",\n    style: {\n      overflow: \"auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar\",\n      style: {\n        backgroundColor: \"#fff\"\n      },\n      children: /*#__PURE__*/_jsxDEV(BackHeader, {\n        title: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      className: \"profile_content\",\n      style: {\n        backgroundColor: \"white\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        className: \"user_profile_row\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          xl: 8,\n          className: \"user_profile_col\",\n          span: 8\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          xl: 8,\n          className: \"user_profile_col\",\n          span: 8,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            loading: isCardLoading,\n            children: /*#__PURE__*/_jsxDEV(ConfigProvider, {\n              locale: en,\n              children: /*#__PURE__*/_jsxDEV(Form, { ...formItemLayout,\n                name: \"register\",\n                className: \"user_profile_form\",\n                initialValues: {\n                  nickname: (_userData$nickname = userData.nickname) !== null && _userData$nickname !== void 0 ? _userData$nickname : \"\",\n                  phone_number: (_userData$phoneNo = userData.phoneNo) !== null && _userData$phoneNo !== void 0 ? _userData$phoneNo : \"\",\n                  account_type: (_userData$acctType = userData.acctType) !== null && _userData$acctType !== void 0 ? _userData$acctType : \"\",\n                  organisation_name: (_userData$orgName = userData.orgName) !== null && _userData$orgName !== void 0 ? _userData$orgName : \"\"\n                },\n                onFinish: onFinish,\n                children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n                  name: \"nickname\",\n                  label: \"Nickname\",\n                  tooltip: \"What do you want others to call you?\",\n                  rules: [{\n                    required: true,\n                    message: \"Please input your nickname!\",\n                    whitespace: true\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(FormPhoneInput, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                  label: \"Type\",\n                  name: \"account_type\",\n                  rules: [{\n                    required: true,\n                    message: \"Please choose your account type!\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Radio.Group, {\n                    children: [/*#__PURE__*/_jsxDEV(Radio.Button, {\n                      value: \"institute\",\n                      children: \"Institute\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 12\n                    }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n                      value: \"company\",\n                      children: \"Company\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 12\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n                  label: \"Org Name\",\n                  name: \"organisation_name\",\n                  tooltip: \"Please input your Company/Institution name\",\n                  rules: [{\n                    required: true,\n                    message: \"Please input your Company/Institution name!\"\n                  }],\n                  children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(Form.Item, { ...tailFormItemLayout,\n                  children: /*#__PURE__*/_jsxDEV(FormButton, {\n                    title: \"Update\",\n                    isLoading: isLoading\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 11\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          xs: 24,\n          xl: 8,\n          className: \"user_profile_col\",\n          span: 8\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 3\n  }, this);\n};\n\n_s(UserProfile, \"c3aacjR3xg+8+3wBZQ70c776wW4=\", false, function () {\n  return [useHistory];\n});\n\n_c = UserProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"sources":["/Users/gohshengyang/Documents/GitHub/codagence-web/src/pages/profile/UserProfile.tsx"],"names":["Card","Col","Form","Input","Layout","Radio","Row","ConfigProvider","mixpanel","React","useEffect","useState","formatPhoneNumberIntl","useHistory","en","User","UserRepo","BackHeader","FormButton","FormPhoneInput","LocalStorage","RoutePath","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","UserProfile","userRepo","history","isLoading","setLoading","isCardLoading","setCardLoading","userData","setUserData","onFinish","values","userId","getUserID","track","apiResult","saveUser","purpose","nickname","phoneNo","acctType","orgName","isSuccess","alert","message","people","set","Nickname","PhoneNo","AcctType","OrgName","replace","home","fetchData","getUserById","data","overflow","backgroundColor","phone_number","account_type","organisation_name","required","whitespace"],"mappings":"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","sourcesContent":["import { Card, Col, Form, Input, Layout, Radio, Row } from \"antd\";\nimport { ConfigProvider } from \"antd-country-phone-input\";\nimport \"antd-country-phone-input/dist/index.css\";\nimport mixpanel from \"mixpanel-browser\";\nimport React, { useEffect, useState } from \"react\";\nimport { formatPhoneNumberIntl } from \"react-phone-number-input\";\nimport { useHistory } from \"react-router-dom\";\nimport en from \"world_countries_lists/data/en/world.json\";\nimport { User } from \"../../services/api/models/user_model\";\nimport { UserRepo } from \"../../services/api/repositories/user_repo\";\nimport { BackHeader, FormButton, FormPhoneInput } from \"../../utils/components\";\nimport { LocalStorage } from \"../../utils/localStorage\";\nimport { RoutePath } from \"../../utils/routePath\";\nimport \"./UserProfile.less\";\n\nconst formItemLayout = {\n\tlabelCol: {\n\t\txs: { span: 24 },\n\t\tsm: { span: 8 },\n\t},\n\twrapperCol: {\n\t\txs: { span: 24 },\n\t\tsm: { span: 16 },\n\t},\n};\nconst tailFormItemLayout = {\n\twrapperCol: {\n\t\txs: {\n\t\t\tspan: 24,\n\t\t\toffset: 0,\n\t\t},\n\t\tsm: {\n\t\t\tspan: 16,\n\t\t\toffset: 8,\n\t\t},\n\t},\n};\n\nexport const UserProfile: React.FC<any> = () => {\n\tlet userRepo = new UserRepo();\n\n\tlet history = useHistory();\n\n\t// Is btn loading flag\n\tconst [isLoading, setLoading] = useState(false);\n\n\t// Is card loading flag\n\tconst [isCardLoading, setCardLoading] = useState(true);\n\n\tconst [userData, setUserData] = useState(new User({}));\n\n\tconst onFinish = async (values: any) => {\n\t\tlet userId = await LocalStorage.getUserID();\n\t\tsetLoading(true);\n\t\tmixpanel.track(\"Profile_Excecute_Update_Profile_Click\");\n\n\t\tlet apiResult = await userRepo.saveUser({\n\t\t\tpurpose: \"update\",\n\t\t\tuserId: userId!,\n\t\t\tnickname: values[\"nickname\"],\n\t\t\tphoneNo: formatPhoneNumberIntl(values[\"phone_number\"]),\n\t\t\tacctType: values[\"account_type\"],\n\t\t\torgName: values[\"organisation_name\"],\n\t\t});\n\n\t\tif (apiResult.isSuccess) {\n\t\t\talert(\"Update Success\");\n\t\t\tmixpanel.track(\"Profile_Excecute_Update_Profile_Click\", {\n\t\t\t\tapiResult: apiResult.message,\n\t\t\t});\n\n\t\t\tmixpanel.people.set({\n\t\t\t\tNickname: values[\"nickname\"],\n\t\t\t\tPhoneNo: formatPhoneNumberIntl(values[\"phone_number\"]),\n\t\t\t\tAcctType: values[\"account_type\"],\n\t\t\t\tOrgName: values[\"organisation_name\"],\n\t\t\t});\n\t\t\thistory.replace(RoutePath.home);\n\t\t\tsetLoading(false);\n\t\t} else {\n\t\t\tmixpanel.track(\"Profile_Excecute_Update_ProfileClick\", {\n\t\t\t\tapiResult: apiResult.message,\n\t\t\t});\n\n\t\t\talert(apiResult.message);\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\tlet userId = await LocalStorage.getUserID();\n\t\t\tlet apiResult = await userRepo.getUserById({\n\t\t\t\tuserId: userId!,\n\t\t\t});\n\t\t\tif (apiResult.isSuccess) {\n\t\t\t\tsetUserData(apiResult.data[0]);\n\t\t\t} else {\n\t\t\t\talert(apiResult.message);\n\t\t\t}\n\t\t\tsetCardLoading(false);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\treturn (\n\t\t<Layout className=\"layout\" style={{ overflow: \"auto\" }}>\n\t\t\t<div className=\"navbar\" style={{ backgroundColor: \"#fff\" }}>\n\t\t\t\t<BackHeader title=\"Profile\" />\n\t\t\t</div>\n\t\t\t<Layout\n\t\t\t\tclassName=\"profile_content\"\n\t\t\t\tstyle={{ backgroundColor: \"white\" }}\n\t\t\t>\n\t\t\t\t<Row className=\"user_profile_row\">\n\t\t\t\t\t<Col xs={24} xl={8} className=\"user_profile_col\" span={8} />\n\t\t\t\t\t<Col xs={24} xl={8} className=\"user_profile_col\" span={8}>\n\t\t\t\t\t\t<Card loading={isCardLoading}>\n\t\t\t\t\t\t\t<ConfigProvider locale={en}>\n\t\t\t\t\t\t\t\t<Form\n\t\t\t\t\t\t\t\t\t{...formItemLayout}\n\t\t\t\t\t\t\t\t\tname=\"register\"\n\t\t\t\t\t\t\t\t\tclassName=\"user_profile_form\"\n\t\t\t\t\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\t\t\t\t\tnickname: userData.nickname ?? \"\",\n\t\t\t\t\t\t\t\t\t\tphone_number: userData.phoneNo ?? \"\",\n\t\t\t\t\t\t\t\t\t\taccount_type: userData.acctType ?? \"\",\n\t\t\t\t\t\t\t\t\t\torganisation_name:\n\t\t\t\t\t\t\t\t\t\t\tuserData.orgName ?? \"\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\tname=\"nickname\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Nickname\"\n\t\t\t\t\t\t\t\t\t\ttooltip=\"What do you want others to call you?\"\n\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please input your nickname!\",\n\t\t\t\t\t\t\t\t\t\t\t\twhitespace: true,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Input />\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t<FormPhoneInput />\n\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\tlabel=\"Type\"\n\t\t\t\t\t\t\t\t\t\tname=\"account_type\"\n\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please choose your account type!\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Radio.Group>\n\t\t\t\t\t\t\t\t\t\t\t<Radio.Button value=\"institute\">\n\t\t\t\t\t\t\t\t\t\t\t\tInstitute\n\t\t\t\t\t\t\t\t\t\t\t</Radio.Button>\n\t\t\t\t\t\t\t\t\t\t\t<Radio.Button value=\"company\">\n\t\t\t\t\t\t\t\t\t\t\t\tCompany\n\t\t\t\t\t\t\t\t\t\t\t</Radio.Button>\n\t\t\t\t\t\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\t\t\t\tlabel=\"Org Name\"\n\t\t\t\t\t\t\t\t\t\tname=\"organisation_name\"\n\t\t\t\t\t\t\t\t\t\ttooltip=\"Please input your Company/Institution name\"\n\t\t\t\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please input your Company/Institution name!\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Input />\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t\t<Form.Item {...tailFormItemLayout}>\n\t\t\t\t\t\t\t\t\t\t<FormButton\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"Update\"\n\t\t\t\t\t\t\t\t\t\t\tisLoading={isLoading}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t\t</ConfigProvider>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col xs={24} xl={8} className=\"user_profile_col\" span={8} />\n\t\t\t\t</Row>\n\t\t\t</Layout>\n\t\t</Layout>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}