{"ast":null,"code":"var _jsxFileName = \"/Users/gohshengyang/Documents/GitHub/zeusapi-web/src/pages/profile/UserProfile.tsx\",\n    _s = $RefreshSig$();\n\nimport { Form, Input, Radio } from \"antd\";\nimport \"antd-country-phone-input/dist/index.css\";\nimport React, { useEffect, useState } from \"react\";\nimport { formatPhoneNumberIntl } from \"react-phone-number-input\";\nimport { useHistory } from \"react-router-dom\";\nimport { User } from \"../../services/api/models/user_model\";\nimport { UserRepo } from \"../../services/api/repositories/user_repo\";\nimport { FormButton, FormPhoneInput } from \"../../utils/components\";\nimport { LocalStorage } from \"../../utils/localStorage\";\nimport { RoutePath } from \"../../utils/routePath\";\nimport \"./UserProfile.less\";\nimport { Button, Flex, FormLabel, Heading, Stack, useColorModeValue } from \"@chakra-ui/react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst formItemLayout = {\n  labelCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 8\n    }\n  },\n  wrapperCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 16\n    }\n  }\n};\nconst tailFormItemLayout = {\n  wrapperCol: {\n    xs: {\n      span: 24,\n      offset: 0\n    },\n    sm: {\n      span: 16,\n      offset: 8\n    }\n  }\n};\nexport const UserProfile = () => {\n  _s();\n\n  var _userData$firstName, _userData$lastName, _userData$phoneNo, _userData$acctType, _userData$orgName;\n\n  let userRepo = new UserRepo();\n  let history = useHistory(); // Is btn loading flag\n\n  const [isLoading, setLoading] = useState(false); // Is card loading flag\n\n  const [isCardLoading, setCardLoading] = useState(true);\n  const [userData, setUserData] = useState(new User({}));\n  const [form] = Form.useForm();\n\n  const onFinish = async values => {\n    let userId = await LocalStorage.getUserID();\n    setLoading(true);\n    let apiResult = await userRepo.saveUser({\n      purpose: \"update\",\n      userId: userId,\n      username: values[\"first_name\"] + values[\"last_name\"],\n      firstName: values[\"first_name\"],\n      lastName: values[\"last_name\"],\n      phoneNo: formatPhoneNumberIntl(values[\"phone_number\"]),\n      acctType: values[\"account_type\"],\n      orgName: values[\"organisation_name\"]\n    });\n\n    if (apiResult.isSuccess) {\n      alert(\"Update Success\");\n      history.replace(RoutePath.home);\n      setLoading(false);\n    } else {\n      alert(apiResult.message);\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    async function fetchData() {\n      let userId = await LocalStorage.getUserID();\n      console.log(\"here\");\n      let apiResult = await userRepo.getUserById({\n        userId: userId\n      });\n\n      if (apiResult.isSuccess) {\n        setUserData(apiResult.data[0]);\n      } else {\n        alert(apiResult.message);\n      }\n\n      setCardLoading(false);\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      let userId = await LocalStorage.getUserID();\n      console.log(\"here\");\n      let apiResult = await userRepo.getUserById({\n        userId: userId\n      });\n\n      if (apiResult.isSuccess) {\n        setUserData(apiResult.data[0]);\n      } else {\n        alert(apiResult.message);\n      }\n\n      setCardLoading(false);\n    }\n\n    fetchData();\n  }, []);\n  useEffect(() => {\n    form.resetFields();\n  }, [userData]);\n  return /*#__PURE__*/_jsxDEV(Flex, {\n    minH: \"100vh\",\n    align: \"center\",\n    justify: \"center\",\n    bg: useColorModeValue(\"gray.50\", \"gray.800\"),\n    children: /*#__PURE__*/_jsxDEV(Stack, {\n      spacing: 4,\n      w: \"full\",\n      maxW: \"md\",\n      bg: useColorModeValue(\"white\", \"gray.700\"),\n      rounded: \"xl\",\n      boxShadow: \"lg\",\n      p: 6,\n      my: 12,\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        lineHeight: 1.1,\n        fontSize: {\n          base: \"2xl\",\n          sm: \"3xl\"\n        },\n        children: \"User Profile Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        name: \"register\",\n        className: \"user_profile_form\",\n        form: form,\n        initialValues: {\n          first_name: (_userData$firstName = userData.firstName) !== null && _userData$firstName !== void 0 ? _userData$firstName : \"\",\n          last_name: (_userData$lastName = userData.lastName) !== null && _userData$lastName !== void 0 ? _userData$lastName : \"\",\n          phone_number: (_userData$phoneNo = userData.phoneNo) !== null && _userData$phoneNo !== void 0 ? _userData$phoneNo : \"\",\n          account_type: (_userData$acctType = userData.acctType) !== null && _userData$acctType !== void 0 ? _userData$acctType : \"\",\n          organisation_name: (_userData$orgName = userData.orgName) !== null && _userData$orgName !== void 0 ? _userData$orgName : \"\"\n        },\n        onFinish: onFinish,\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          style: {\n            marginBottom: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"first_name\",\n            rules: [{\n              required: true\n            }],\n            style: {\n              display: \"inline-block\",\n              width: \"calc(50% - 8px)\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"last_name\",\n            rules: [{\n              required: true\n            }],\n            style: {\n              display: \"inline-block\",\n              width: \"calc(50% - 8px)\",\n              margin: \"0 8px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"Last Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(FormPhoneInput, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n            children: \"Account Type\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"account_type\",\n            rules: [{\n              required: true,\n              message: \"Please choose your account type!\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(Radio.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Radio.Button, {\n                value: \"institute\",\n                children: \"Institute\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(Radio.Button, {\n                value: \"company\",\n                children: \"Company\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n            children: \"Organisation Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"organisation_name\",\n            tooltip: \"Please input your Company/Institution name\",\n            rules: [{\n              required: true,\n              message: \"Please input your Company/Institution name!\"\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(Stack, {\n          spacing: 6,\n          direction: [\"column\", \"row\"],\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            bg: \"red.400\",\n            color: \"white\",\n            w: \"full\",\n            _hover: {\n              bg: \"red.500\"\n            },\n            width: 50,\n            onClick: () => {\n              history.goBack();\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            children: /*#__PURE__*/_jsxDEV(FormButton, {\n              title: \"Save\",\n              isLoading: isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 3\n  }, this);\n};\n\n_s(UserProfile, \"nSZnyJe8sVDsWegEsUlOtGjjcac=\", false, function () {\n  return [useHistory, Form.useForm, useColorModeValue, useColorModeValue];\n});\n\n_c = UserProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"sources":["/Users/gohshengyang/Documents/GitHub/zeusapi-web/src/pages/profile/UserProfile.tsx"],"names":["Form","Input","Radio","React","useEffect","useState","formatPhoneNumberIntl","useHistory","User","UserRepo","FormButton","FormPhoneInput","LocalStorage","RoutePath","Button","Flex","FormLabel","Heading","Stack","useColorModeValue","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","UserProfile","userRepo","history","isLoading","setLoading","isCardLoading","setCardLoading","userData","setUserData","form","useForm","onFinish","values","userId","getUserID","apiResult","saveUser","purpose","username","firstName","lastName","phoneNo","acctType","orgName","isSuccess","alert","replace","home","message","fetchData","console","log","getUserById","data","resetFields","base","first_name","last_name","phone_number","account_type","organisation_name","marginBottom","required","display","width","margin","bg","goBack"],"mappings":"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","sourcesContent":["import { Card, Col, Form, Input, Layout, Radio, Row } from \"antd\";\nimport { ConfigProvider } from \"antd-country-phone-input\";\nimport \"antd-country-phone-input/dist/index.css\";\nimport React, { useEffect, useState } from \"react\";\nimport { formatPhoneNumberIntl } from \"react-phone-number-input\";\nimport { useHistory } from \"react-router-dom\";\nimport en from \"world_countries_lists/data/en/world.json\";\nimport { User } from \"../../services/api/models/user_model\";\nimport { UserRepo } from \"../../services/api/repositories/user_repo\";\nimport { BackHeader, FormButton, FormPhoneInput } from \"../../utils/components\";\nimport { LocalStorage } from \"../../utils/localStorage\";\nimport { RoutePath } from \"../../utils/routePath\";\nimport \"./UserProfile.less\";\nimport {\n\tButton,\n\tFlex,\n\tFormLabel,\n\tHeading,\n\tStack,\n\tuseColorModeValue,\n} from \"@chakra-ui/react\";\n\nconst formItemLayout = {\n\tlabelCol: {\n\t\txs: { span: 24 },\n\t\tsm: { span: 8 },\n\t},\n\twrapperCol: {\n\t\txs: { span: 24 },\n\t\tsm: { span: 16 },\n\t},\n};\nconst tailFormItemLayout = {\n\twrapperCol: {\n\t\txs: {\n\t\t\tspan: 24,\n\t\t\toffset: 0,\n\t\t},\n\t\tsm: {\n\t\t\tspan: 16,\n\t\t\toffset: 8,\n\t\t},\n\t},\n};\n\nexport const UserProfile: React.FC<any> = () => {\n\tlet userRepo = new UserRepo();\n\n\tlet history = useHistory();\n\n\t// Is btn loading flag\n\tconst [isLoading, setLoading] = useState(false);\n\n\t// Is card loading flag\n\tconst [isCardLoading, setCardLoading] = useState(true);\n\n\tconst [userData, setUserData] = useState(new User({}));\n\n\tconst [form] = Form.useForm();\n\n\tconst onFinish = async (values: any) => {\n\t\tlet userId = await LocalStorage.getUserID();\n\t\tsetLoading(true);\n\n\t\tlet apiResult = await userRepo.saveUser({\n\t\t\tpurpose: \"update\",\n\t\t\tuserId: userId!,\n\t\t\tusername: values[\"first_name\"] + values[\"last_name\"],\n\t\t\tfirstName: values[\"first_name\"],\n\t\t\tlastName: values[\"last_name\"],\n\t\t\tphoneNo: formatPhoneNumberIntl(values[\"phone_number\"]),\n\t\t\tacctType: values[\"account_type\"],\n\t\t\torgName: values[\"organisation_name\"],\n\t\t});\n\n\t\tif (apiResult.isSuccess) {\n\t\t\talert(\"Update Success\");\n\n\t\t\thistory.replace(RoutePath.home);\n\t\t\tsetLoading(false);\n\t\t} else {\n\t\t\talert(apiResult.message);\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\tlet userId = await LocalStorage.getUserID();\n\t\t\tconsole.log(\"here\");\n\t\t\tlet apiResult = await userRepo.getUserById({\n\t\t\t\tuserId: userId!,\n\t\t\t});\n\t\t\tif (apiResult.isSuccess) {\n\t\t\t\tsetUserData(apiResult.data[0]);\n\t\t\t} else {\n\t\t\t\talert(apiResult.message);\n\t\t\t}\n\t\t\tsetCardLoading(false);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\tlet userId = await LocalStorage.getUserID();\n\t\t\tconsole.log(\"here\");\n\t\t\tlet apiResult = await userRepo.getUserById({\n\t\t\t\tuserId: userId!,\n\t\t\t});\n\t\t\tif (apiResult.isSuccess) {\n\t\t\t\tsetUserData(apiResult.data[0]);\n\t\t\t} else {\n\t\t\t\talert(apiResult.message);\n\t\t\t}\n\t\t\tsetCardLoading(false);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tform.resetFields();\n\t}, [userData]);\n\n\treturn (\n\t\t<Flex\n\t\t\tminH={\"100vh\"}\n\t\t\talign={\"center\"}\n\t\t\tjustify={\"center\"}\n\t\t\tbg={useColorModeValue(\"gray.50\", \"gray.800\")}\n\t\t>\n\t\t\t<Stack\n\t\t\t\tspacing={4}\n\t\t\t\tw={\"full\"}\n\t\t\t\tmaxW={\"md\"}\n\t\t\t\tbg={useColorModeValue(\"white\", \"gray.700\")}\n\t\t\t\trounded={\"xl\"}\n\t\t\t\tboxShadow={\"lg\"}\n\t\t\t\tp={6}\n\t\t\t\tmy={12}\n\t\t\t>\n\t\t\t\t<Heading lineHeight={1.1} fontSize={{ base: \"2xl\", sm: \"3xl\" }}>\n\t\t\t\t\tUser Profile Edit\n\t\t\t\t</Heading>\n\t\t\t\t<Form\n\t\t\t\t\tname=\"register\"\n\t\t\t\t\tclassName=\"user_profile_form\"\n\t\t\t\t\tform={form}\n\t\t\t\t\tinitialValues={{\n\t\t\t\t\t\tfirst_name: userData.firstName ?? \"\",\n\t\t\t\t\t\tlast_name: userData.lastName ?? \"\",\n\t\t\t\t\t\tphone_number: userData.phoneNo ?? \"\",\n\t\t\t\t\t\taccount_type: userData.acctType ?? \"\",\n\t\t\t\t\t\torganisation_name: userData.orgName ?? \"\",\n\t\t\t\t\t}}\n\t\t\t\t\tonFinish={onFinish}\n\t\t\t\t>\n\t\t\t\t\t<Form.Item style={{ marginBottom: 0 }}>\n\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\tname=\"first_name\"\n\t\t\t\t\t\t\trules={[{ required: true }]}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: \"inline-block\",\n\t\t\t\t\t\t\t\twidth: \"calc(50% - 8px)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Input placeholder=\"First Name\" />\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\tname=\"last_name\"\n\t\t\t\t\t\t\trules={[{ required: true }]}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tdisplay: \"inline-block\",\n\t\t\t\t\t\t\t\twidth: \"calc(50% - 8px)\",\n\t\t\t\t\t\t\t\tmargin: \"0 8px\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Input placeholder=\"Last Name\" />\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Form.Item>\n\n\t\t\t\t\t<FormPhoneInput />\n\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FormLabel>Account Type</FormLabel>\n\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\tname=\"account_type\"\n\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\tmessage: \"Please choose your account type!\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Radio.Group>\n\t\t\t\t\t\t\t\t<Radio.Button value=\"institute\">\n\t\t\t\t\t\t\t\t\tInstitute\n\t\t\t\t\t\t\t\t</Radio.Button>\n\t\t\t\t\t\t\t\t<Radio.Button value=\"company\">\n\t\t\t\t\t\t\t\t\tCompany\n\t\t\t\t\t\t\t\t</Radio.Button>\n\t\t\t\t\t\t\t</Radio.Group>\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<FormLabel>Organisation Name</FormLabel>\n\t\t\t\t\t\t<Form.Item\n\t\t\t\t\t\t\tname=\"organisation_name\"\n\t\t\t\t\t\t\ttooltip=\"Please input your Company/Institution name\"\n\t\t\t\t\t\t\trules={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\"Please input your Company/Institution name!\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Input />\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</>\n\t\t\t\t\t<Stack spacing={6} direction={[\"column\", \"row\"]}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tbg={\"red.400\"}\n\t\t\t\t\t\t\tcolor={\"white\"}\n\t\t\t\t\t\t\tw=\"full\"\n\t\t\t\t\t\t\t_hover={{\n\t\t\t\t\t\t\t\tbg: \"red.500\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\twidth={50}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\thistory.goBack();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Form.Item>\n\t\t\t\t\t\t\t<FormButton title=\"Save\" isLoading={isLoading} />\n\t\t\t\t\t\t</Form.Item>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Form>\n\t\t\t</Stack>\n\t\t</Flex>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}